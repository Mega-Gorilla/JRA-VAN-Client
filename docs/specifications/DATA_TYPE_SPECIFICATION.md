# データ種別仕様書

## 1. 蓄積系データ仕様

### 1.1 RACE - レース詳細データ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | RACE |
| 提供タイミング | レース確定後（通常月曜14:00） |
| データ期間 | 1986年以降 |
| ファイルサイズ | 約50MB/年 |
| レコード構成 | RA + SE × n + HR + H1～H6 + O1～O6 |

#### レコード出現順序
```
RA (1レコード)
├─ SE (出走頭数分)
├─ HR (1レコード)
├─ H1 (1レコード)
├─ H2 (1レコード)
├─ H3 (1レコード)
├─ H4 (1レコード)
├─ H5 (1レコード)
├─ H6 (1レコード)
├─ O1 (1レコード)
├─ O2 (1レコード)
├─ O3 (1レコード)
├─ O4 (1レコード)
├─ O5 (1レコード)
└─ O6 (1レコード)
```

#### オプション指定
| オプション | 内容 | 用途 |
|-----------|------|------|
| 1 | 通常データ | 過去全データ取得 |
| 2 | 今週データ | 当週分のみ |
| 3 | 過去1ヶ月 | 直近1ヶ月分 |
| 4 | セットアップ | 初回全データ |

### 1.2 DIFF - 番組変更データ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | DIFF |
| 提供タイミング | 変更発生時（随時） |
| データ期間 | 当週分のみ |
| ファイルサイズ | 可変（通常1MB以下） |
| レコード構成 | CC × n |

#### 変更種別
| 変更ID | 変更内容 | 頻度 |
|--------|---------|------|
| WE | 天候・馬場状態 | 高 |
| AV | 騎手変更 | 中 |
| WC | 出走取消・除外 | 中 |
| JC | 発走時刻変更 | 低 |
| TC | 登録頭数変更 | 低 |
| CC | コース変更 | 極低 |

### 1.3 SLOP - 坂路調教データ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | SLOP |
| 提供タイミング | 金曜18:00/土曜18:00 |
| データ期間 | 当週分 |
| ファイルサイズ | 約10MB/週 |
| レコード構成 | HC × n |

#### データ項目
| 項目 | 説明 | 単位 |
|------|------|------|
| 調教日付 | 調教実施日 | YYYYMMDD |
| 調教時刻 | 調教開始時刻 | HHMM |
| 調教コース | 坂路/ウッド/芝/ダート | コード |
| タイム | 計測タイム | 1/10秒 |
| 馬なり/一杯 | 調教強度 | フラグ |

### 1.4 YSCH - 年間スケジュール

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | YSCH |
| 提供タイミング | 年度初/変更時 |
| データ期間 | 当年度分 |
| ファイルサイズ | 約1MB |
| レコード構成 | YS × n |

#### スケジュール情報
| 項目 | 説明 |
|------|------|
| 開催年月日 | YYYYMMDD |
| 競馬場 | 場コード |
| 開催回次 | 第N回 |
| 開催日目 | N日目 |
| レース数 | 当日レース数 |
| 重賞レース | 重賞レース情報 |

### 1.5 HOSE - 競走馬マスタ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | HOSE |
| 提供タイミング | 週次（月曜14:00） |
| データ期間 | 全現役馬 |
| ファイルサイズ | 約100MB |
| レコード構成 | UM × n |

#### 管理対象
| 区分 | 説明 | 更新頻度 |
|------|------|---------|
| 現役馬 | JRA登録馬 | 週次 |
| 地方馬 | 地方競馬登録馬 | 月次 |
| 抹消馬 | 登録抹消馬 | 月次 |

### 1.6 BLOD - 血統データ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | BLOD |
| 提供タイミング | 月次 |
| データ期間 | 全血統 |
| ファイルサイズ | 約50MB |
| レコード構成 | HN + SK × n |

#### 血統情報
| 世代 | 含まれる情報 |
|------|------------|
| 1代 | 本馬 |
| 2代 | 父・母 |
| 3代 | 父父・父母・母父・母母 |
| 4代 | 8頭分 |
| 5代 | 16頭分 |

### 1.7 MING - データマイニング予想

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | MING |
| 提供タイミング | レース前日18:00 |
| データ期間 | 当週分 |
| ファイルサイズ | 約5MB/週 |
| レコード構成 | DM/TM × n |

#### 予想種別
| 種別 | 説明 | アルゴリズム |
|------|------|------------|
| DM | 対戦型 | 過去対戦成績ベース |
| TM | タイム型 | 走破タイムベース |

## 2. 速報系データ仕様

### 2.1 0B11 - 馬体重データ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B11 |
| 提供タイミング | 発走60分前 |
| 更新頻度 | 1回のみ |
| データサイズ | 351バイト/レース |
| レコード構成 | WH × 1 |

#### データ内容
| 項目 | 説明 | 備考 |
|------|------|------|
| 馬体重 | 当日計量値 | kg単位 |
| 増減 | 前走比 | ±kg |
| 計測時刻 | 計量時刻 | HHMM |

### 2.2 0B12 - 単勝・複勝オッズ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B12 |
| 提供タイミング | 発売開始～締切 |
| 更新頻度 | 30秒間隔 |
| データサイズ | 1816バイト/回 |
| レコード構成 | O1 × 1 |

#### オッズ情報
| 項目 | 説明 | 精度 |
|------|------|------|
| 単勝オッズ | 各馬の単勝オッズ | 0.1倍単位 |
| 複勝オッズ | 最低～最高 | 0.1倍単位 |
| 票数 | 売上票数 | 1票単位 |
| 人気順 | オッズ順位 | 1～28位 |

### 2.3 0B15 - 馬連オッズ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B15 |
| 提供タイミング | 発売開始～締切 |
| 更新頻度 | 60秒間隔 |
| データサイズ | 約15KB/回 |
| レコード構成 | O2 × 1 |

#### 組み合わせ数
| 出走頭数 | 組み合わせ数 |
|---------|------------|
| 9頭 | 36通り |
| 12頭 | 66通り |
| 15頭 | 105通り |
| 18頭 | 153通り |

### 2.4 0B16 - ワイドオッズ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B16 |
| 提供タイミング | 発売開始～締切 |
| 更新頻度 | 60秒間隔 |
| データサイズ | 約15KB/回 |
| レコード構成 | O3 × 1 |

### 2.5 0B17 - 馬単オッズ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B17 |
| 提供タイミング | 発売開始～締切 |
| 更新頻度 | 60秒間隔 |
| データサイズ | 約30KB/回 |
| レコード構成 | O4 × 1 |

#### 組み合わせ数
| 出走頭数 | 組み合わせ数 |
|---------|------------|
| 9頭 | 72通り |
| 12頭 | 132通り |
| 15頭 | 210通り |
| 18頭 | 306通り |

### 2.6 0B18 - 3連複オッズ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B18 |
| 提供タイミング | 発売開始～締切 |
| 更新頻度 | 120秒間隔 |
| データサイズ | 約40KB/回 |
| レコード構成 | O5 × 1 |

#### 組み合わせ数
| 出走頭数 | 組み合わせ数 |
|---------|------------|
| 9頭 | 84通り |
| 12頭 | 220通り |
| 15頭 | 455通り |
| 18頭 | 816通り |

### 2.7 0B19 - 3連単オッズ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B19 |
| 提供タイミング | 発売開始～締切 |
| 更新頻度 | 300秒間隔 |
| データサイズ | 約200KB/回 |
| レコード構成 | O6 × 1 |

#### 組み合わせ数
| 出走頭数 | 組み合わせ数 |
|---------|------------|
| 9頭 | 504通り |
| 12頭 | 1320通り |
| 15頭 | 2730通り |
| 18頭 | 4896通り |

### 2.8 0B30 - 払戻金データ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B30 |
| 提供タイミング | 確定後即時 |
| 更新頻度 | 1回のみ |
| データサイズ | 可変 |
| レコード構成 | HR × 1 |

### 2.9 0B31 - WIN5データ

#### 概要
| 項目 | 内容 |
|------|------|
| データスペック | 0B31 |
| 提供タイミング | 随時 |
| 更新頻度 | レース確定毎 |
| データサイズ | 可変 |
| レコード構成 | WF × n |

#### WIN5情報
| 項目 | 説明 |
|------|------|
| 対象レース | 5レース指定 |
| 発売票数 | 累計票数 |
| 払戻金額 | 的中時払戻 |
| キャリーオーバー | 次回繰越額 |

## 3. データ取得パラメータ

### 3.1 dataspec パラメータ

| 値 | データ種別 | 分類 |
|----|----------|------|
| RACE | レース詳細 | 蓄積系 |
| DIFF | 番組変更 | 蓄積系 |
| SLOP | 坂路調教 | 蓄積系 |
| YSCH | 年間スケジュール | 蓄積系 |
| HOSE | 競走馬マスタ | 蓄積系 |
| BLOD | 血統 | 蓄積系 |
| MING | データマイニング | 蓄積系 |
| 0B11 | 馬体重 | 速報系 |
| 0B12 | 単複オッズ | 速報系 |
| 0B15 | 馬連オッズ | 速報系 |
| 0B16 | ワイドオッズ | 速報系 |
| 0B17 | 馬単オッズ | 速報系 |
| 0B18 | 3連複オッズ | 速報系 |
| 0B19 | 3連単オッズ | 速報系 |
| 0B30 | 払戻 | 速報系 |
| 0B31 | WIN5 | 速報系 |

### 3.2 option パラメータ

| 値 | 意味 | 対象データ |
|----|------|----------|
| 1 | 通常 | 全データ種別 |
| 2 | 今週分 | 蓄積系のみ |
| 3 | 過去1ヶ月 | RACE/DIFFのみ |
| 4 | セットアップ | 初回用 |

### 3.3 fromtime パラメータ

| 形式 | 説明 | 例 |
|------|------|-----|
| YYYYMMDDhhmmss | 開始日時 | 20250801000000 |
| YYYYMMDD000000 | 日付指定 | 20250801000000 |
| 0 | 全期間 | セットアップ時 |

## 4. データサイズ目安

### 年間データ量

| データ種別 | 年間サイズ | 圧縮後 |
|-----------|----------|--------|
| RACE | 約500MB | 約100MB |
| DIFF | 約10MB | 約2MB |
| SLOP | 約200MB | 約40MB |
| YSCH | 約1MB | 約200KB |
| HOSE | 約100MB | 約20MB |
| BLOD | 約50MB | 約10MB |
| MING | 約100MB | 約20MB |
| 速報系（合計） | 約1GB | 約200MB |

### セットアップ時必要容量

| 期間 | 必要容量 | 圧縮後 |
|------|---------|--------|
| 過去1年 | 約2GB | 約400MB |
| 過去5年 | 約10GB | 約2GB |
| 過去10年 | 約20GB | 約4GB |
| 全データ（1986年～） | 約50GB | 約10GB |

---

*最終更新: 2025年8月29日*  
*バージョン: 4.9.0.2*